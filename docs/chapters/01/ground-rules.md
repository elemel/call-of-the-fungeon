## Chapter 1: Ground Rules

{% assign problem = site.data.problems.ground_rules %}

You have entered a dungeon. You stand at the bottom of the staircase where you entered, facing east. A gnomish cartographer, carrying a bundle of scrolls, peers at you from nearby. As he moves to the staircase, he thrusts a scroll into your hands. Before you can respond, he has already left the dungeon.

Unrolling the scroll, you identify it as a magic map. It ripples and shifts into a symbolic representation of the dungeon:

```
{{ problem.map }}
```

The dungeon is arranged as a grid of tiles. The directions on the map are right for east, down for south, left for west, and up for north.

You discover a contraption that was rolled into the map: an amulet of timekeeping. You sling it around your neck, hanging close to your heart. With every tick of the clockwork, you are compelled to move forward to the next tile and trigger its effect. You trigger only one tile per tick. If triggering a tile causes you to move again during the same tick, no further tile is triggered by the additional move. Triggering a floor tile (marked `.` on the map) has no effect.

The dungeon contains wall tiles: left-turners (marked `[`), right-turners (marked `]`), and halters (marked `#`). Wall tiles block you from moving forward to them, but you still trigger them from the adjacent tile. For a left-turner tile, turn 90 degrees to the left. For a right-turner tile, turn 90 degrees to the right. For a halter tile, do not turn at all, effectively halting forever.

As demonstrated by the gnome, you leave the dungeon by triggering the staircase tile (marked `<`). After how many ticks do you leave the dungeon?

From here, you can [continue to the answer](../../answers/chapters/01/ground-rules.md).


### Example

Consider an example dungeon:

```
#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########
```

The log below shows you exploring the example dungeon, with your location marked `@` on the map. The status line uses the labels `Dx` for direction, `Co` for coordinates, and `Tk` for ticks. Coordinates are shown as `(x, y, z)`, where `x` increases to the east, `y` to the south, and `z` downward. The origin is at the northwest corner of the map.

```
#############[####]#
#]#[..........#]##.]
[.......@]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (8, 2, 0)  Tk: 0

---

You turn right.

#############[####]#
#]#[..........#]##.]
[.......@]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: South  Co: (8, 2, 0)  Tk: 1

---

You go south.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[..@.......[#]#
#]##]#[#]###########

Dx: South  Co: (8, 3, 0)  Tk: 2

---

You turn right.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[..@.......[#]#
#]##]#[#]###########

Dx: West  Co: (8, 3, 0)  Tk: 3

---

You go west.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[.@........[#]#
#]##]#[#]###########

Dx: West  Co: (7, 3, 0)  Tk: 4

---

You go west.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[@.........[#]#
#]##]#[#]###########

Dx: West  Co: (6, 3, 0)  Tk: 5

---

You turn left.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[@.........[#]#
#]##]#[#]###########

Dx: South  Co: (6, 3, 0)  Tk: 6

---

You turn left.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[@.........[#]#
#]##]#[#]###########

Dx: East  Co: (6, 3, 0)  Tk: 7

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[.@........[#]#
#]##]#[#]###########

Dx: East  Co: (7, 3, 0)  Tk: 8

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[..@.......[#]#
#]##]#[#]###########

Dx: East  Co: (8, 3, 0)  Tk: 9

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[...@......[#]#
#]##]#[#]###########

Dx: East  Co: (9, 3, 0)  Tk: 10

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[....@.....[#]#
#]##]#[#]###########

Dx: East  Co: (10, 3, 0)  Tk: 11

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[.....@....[#]#
#]##]#[#]###########

Dx: East  Co: (11, 3, 0)  Tk: 12

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[......@...[#]#
#]##]#[#]###########

Dx: East  Co: (12, 3, 0)  Tk: 13

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[.......@..[#]#
#]##]#[#]###########

Dx: East  Co: (13, 3, 0)  Tk: 14

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[........@.[#]#
#]##]#[#]###########

Dx: East  Co: (14, 3, 0)  Tk: 15

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[.........@[#]#
#]##]#[#]###########

Dx: East  Co: (15, 3, 0)  Tk: 16

---

You turn left.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]..[.........@[#]#
#]##]#[#]###########

Dx: North  Co: (15, 3, 0)  Tk: 17

---

You go north.

#############[####]#
#]#[..........#]##.]
[.......<]##]..@...[
].]..[..........[#]#
#]##]#[#]###########

Dx: North  Co: (15, 2, 0)  Tk: 18

---

You turn right.

#############[####]#
#]#[..........#]##.]
[.......<]##]..@...[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (15, 2, 0)  Tk: 19

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]...@..[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (16, 2, 0)  Tk: 20

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##]....@.[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (17, 2, 0)  Tk: 21

---

You go east.

#############[####]#
#]#[..........#]##.]
[.......<]##].....@[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (18, 2, 0)  Tk: 22

---

You turn left.

#############[####]#
#]#[..........#]##.]
[.......<]##].....@[
].]..[..........[#]#
#]##]#[#]###########

Dx: North  Co: (18, 2, 0)  Tk: 23

---

You go north.

#############[####]#
#]#[..........#]##@]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: North  Co: (18, 1, 0)  Tk: 24

---

You turn right.

#############[####]#
#]#[..........#]##@]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (18, 1, 0)  Tk: 25

---

You turn right.

#############[####]#
#]#[..........#]##@]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: South  Co: (18, 1, 0)  Tk: 26

---

You go south.

#############[####]#
#]#[..........#]##.]
[.......<]##].....@[
].]..[..........[#]#
#]##]#[#]###########

Dx: South  Co: (18, 2, 0)  Tk: 27

---

You turn right.

#############[####]#
#]#[..........#]##.]
[.......<]##].....@[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (18, 2, 0)  Tk: 28

---

You go west.

#############[####]#
#]#[..........#]##.]
[.......<]##]....@.[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (17, 2, 0)  Tk: 29

---

You go west.

#############[####]#
#]#[..........#]##.]
[.......<]##]...@..[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (16, 2, 0)  Tk: 30

---

You go west.

#############[####]#
#]#[..........#]##.]
[.......<]##]..@...[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (15, 2, 0)  Tk: 31

---

You go west.

#############[####]#
#]#[..........#]##.]
[.......<]##].@....[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (14, 2, 0)  Tk: 32

---

You go west.

#############[####]#
#]#[..........#]##.]
[.......<]##]@.....[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (13, 2, 0)  Tk: 33

---

You turn right.

#############[####]#
#]#[..........#]##.]
[.......<]##]@.....[
].]..[..........[#]#
#]##]#[#]###########

Dx: North  Co: (13, 2, 0)  Tk: 34

---

You go north.

#############[####]#
#]#[.........@#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: North  Co: (13, 1, 0)  Tk: 35

---

You turn left.

#############[####]#
#]#[.........@#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (13, 1, 0)  Tk: 36

---

You go west.

#############[####]#
#]#[........@.#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (12, 1, 0)  Tk: 37

---

You go west.

#############[####]#
#]#[.......@..#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (11, 1, 0)  Tk: 38

---

You go west.

#############[####]#
#]#[......@...#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (10, 1, 0)  Tk: 39

---

You go west.

#############[####]#
#]#[.....@....#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (9, 1, 0)  Tk: 40

---

You go west.

#############[####]#
#]#[....@.....#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (8, 1, 0)  Tk: 41

---

You go west.

#############[####]#
#]#[...@......#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (7, 1, 0)  Tk: 42

---

You go west.

#############[####]#
#]#[..@.......#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (6, 1, 0)  Tk: 43

---

You go west.

#############[####]#
#]#[.@........#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (5, 1, 0)  Tk: 44

---

You go west.

#############[####]#
#]#[@.........#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (4, 1, 0)  Tk: 45

---

You turn left.

#############[####]#
#]#[@.........#]##.]
[.......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: South  Co: (4, 1, 0)  Tk: 46

---

You go south.

#############[####]#
#]#[..........#]##.]
[...@...<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: South  Co: (4, 2, 0)  Tk: 47

---

You go south.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].].@[..........[#]#
#]##]#[#]###########

Dx: South  Co: (4, 3, 0)  Tk: 48

---

You turn right.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].].@[..........[#]#
#]##]#[#]###########

Dx: West  Co: (4, 3, 0)  Tk: 49

---

You go west.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]@.[..........[#]#
#]##]#[#]###########

Dx: West  Co: (3, 3, 0)  Tk: 50

---

You turn right.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
].]@.[..........[#]#
#]##]#[#]###########

Dx: North  Co: (3, 3, 0)  Tk: 51

---

You go north.

#############[####]#
#]#[..........#]##.]
[..@....<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: North  Co: (3, 2, 0)  Tk: 52

---

You turn left.

#############[####]#
#]#[..........#]##.]
[..@....<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (3, 2, 0)  Tk: 53

---

You go west.

#############[####]#
#]#[..........#]##.]
[.@.....<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (2, 2, 0)  Tk: 54

---

You go west.

#############[####]#
#]#[..........#]##.]
[@......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (1, 2, 0)  Tk: 55

---

You turn left.

#############[####]#
#]#[..........#]##.]
[@......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: South  Co: (1, 2, 0)  Tk: 56

---

You go south.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
]@]..[..........[#]#
#]##]#[#]###########

Dx: South  Co: (1, 3, 0)  Tk: 57

---

You turn right.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
]@]..[..........[#]#
#]##]#[#]###########

Dx: West  Co: (1, 3, 0)  Tk: 58

---

You turn right.

#############[####]#
#]#[..........#]##.]
[.......<]##]......[
]@]..[..........[#]#
#]##]#[#]###########

Dx: North  Co: (1, 3, 0)  Tk: 59

---

You go north.

#############[####]#
#]#[..........#]##.]
[@......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: North  Co: (1, 2, 0)  Tk: 60

---

You turn right.

#############[####]#
#]#[..........#]##.]
[@......<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (1, 2, 0)  Tk: 61

---

You go east.

#############[####]#
#]#[..........#]##.]
[.@.....<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (2, 2, 0)  Tk: 62

---

You go east.

#############[####]#
#]#[..........#]##.]
[..@....<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (3, 2, 0)  Tk: 63

---

You go east.

#############[####]#
#]#[..........#]##.]
[...@...<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (4, 2, 0)  Tk: 64

---

You go east.

#############[####]#
#]#[..........#]##.]
[....@..<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (5, 2, 0)  Tk: 65

---

You go east.

#############[####]#
#]#[..........#]##.]
[.....@.<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (6, 2, 0)  Tk: 66

---

You go east.

#############[####]#
#]#[..........#]##.]
[......@<]##]......[
].]..[..........[#]#
#]##]#[#]###########

Dx: East  Co: (7, 2, 0)  Tk: 67

---

You go upstairs.

Dx: East  Co: (8, 2, -1)  Tk: 68
```

You leave the example dungeon after 68 ticks.
